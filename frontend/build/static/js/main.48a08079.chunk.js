(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{79:function(e,t,c){},80:function(e,t,c){},88:function(e,t,c){"use strict";c.r(t);var r=c(0),a=c(65),s=c.n(a),n=c(12),i=c(5),j=c(53),d=c(7),l=c(6),o=c(66),b=c(23);const h="/api/products",O="/api/users",x="/api/orders",u=Object(o.a)({tagTypes:["Product","Order","User"],baseQuery:Object(b.d)({baseUrl:"",prepareHeaders:(e,t)=>{var c;let{getState:r}=t;const a=null===(c=r().auth.userInfo)||void 0===c?void 0:c.jwt;return a&&e.set("authorization","Bearer ".concat(a)),e}}),endpoints:e=>({})}),m=e=>(Math.round(100*e)/100).toFixed(2),p=e=>(e.itemsPrice=m(e.cartItems.reduce(((e,t)=>e+t.price*t.qty),0)),e.shippingPrice=m(e.itemsPrice>100?0:10),e.taxPrice=m(Number((.15*e.itemsPrice).toFixed(2))),e.totalPrice=(Number(e.itemsPrice)+Number(e.shippingPrice)+Number(e.taxPrice)).toFixed(2),localStorage.setItem("cart",JSON.stringify(e)),e),g=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):{cartItems:[],shippingAddress:{},paymentMethod:"PayPal"},y=Object(l.e)({name:"cart",initialState:g,reducers:{addToCart:(e,t)=>{const c=t.payload,r=e.cartItems.find((e=>e._id===c._id));return e.cartItems=r?e.cartItems.map((e=>e._id===r._id?c:e)):[...e.cartItems,c],p(e)},removeFromCart:(e,t)=>(e.cartItems=e.cartItems.filter((e=>e._id!==t.payload)),p(e)),saveShippingAddress:(e,t)=>(e.shippingAddress=t.payload,p(e)),savePaymentMethod:(e,t)=>(e.paymentMethod=t.payload,p(e)),clearCartItems:(e,t)=>(e.cartItems=[],p(e))}}),{addToCart:v,removeFromCart:I,saveShippingAddress:P,savePaymentMethod:N,clearCartItems:k}=y.actions;var C=y.reducer;const f={userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null},A=Object(l.e)({name:"auth",initialState:f,reducers:{setCredentials:(e,t)=>{e.userInfo=t.payload,localStorage.setItem("userInfo",JSON.stringify(t.payload))},logout:e=>{e.userInfo=null,localStorage.removeItem("userInfo")}}}),{setCredentials:L,logout:S}=A.actions;var G=A.reducer;var w=Object(l.b)({reducer:{[u.reducerPath]:u.reducer,cart:C,auth:G},middleware:e=>e().concat(u.middleware),devTools:!0}),D=(c(79),c(80),c(99)),M=c(92),U=c(70),R=c(104),E=c(93),T=c(98),Z=c(15),Q=c(11);const q=u.injectEndpoints({endpoints:e=>({login:e.mutation({query:e=>({url:"".concat(O,"/auth"),method:"POST",body:e}),keepUnusedDataFor:5}),register:e.mutation({query:e=>({url:"".concat(O),method:"POST",body:e})}),logout:e.mutation({query:()=>({url:"".concat(O,"/logout"),method:"POST"}),keepUnusedDataFor:5}),getusers:e.query({query:()=>({url:O}),providesTags:["Users"],keepUnusedDataFor:5}),deleteUser:e.mutation({query:e=>({url:"".concat(O,"/").concat(e),method:"DELETE"})}),getUserDetails:e.query({query:e=>({url:"".concat(O,"/").concat(e)}),keepUnusedDataFor:5}),updateUser:e.mutation({query:e=>({url:"".concat(O,"/").concat(e.userId),method:"PUT",body:e}),invalidatesTags:["User"]})})}),{useLoginMutation:J,useLogoutMutation:W,useRegisterMutation:z,useGetusersQuery:B,useDeleteUserMutation:F,useGetUserDetailsQuery:V,useUpdateUserMutation:Y}=q;var X=c(100),H=c(69),K=c(1);var _=function(){const e=Object(i.D)(),{keyword:t}=Object(i.I)(),[c,a]=Object(r.useState)(t||"");return Object(K.jsxs)(X.a,{onSubmit:t=>{t.preventDefault(),c.trim()?(a(""),e("/search/".concat(c))):e("/")},className:"d-flex",children:[Object(K.jsx)(X.a.Control,{type:"text",name:"q",onChange:e=>a(e.target.value),value:c,placeholder:"Search Products...",className:"mr-sm-2 ml-sm-5"}),Object(K.jsx)(H.a,{type:"submit",variant:"outline-light",className:"p-2 mx-2",children:"Search"})]})};var $=function(){const{cartItems:e}=Object(d.f)((e=>e.cart)),{userInfo:t}=Object(d.f)((e=>e.auth)),c=Object(d.e)(),r=Object(i.D)(),[a]=W();return Object(K.jsx)("header",{children:Object(K.jsx)(D.a,{bg:"dark",variant:"dark",expand:"md",collapseOnSelect:!0,children:Object(K.jsxs)(M.a,{children:[Object(K.jsx)(Z.LinkContainer,{to:"/",children:Object(K.jsxs)(D.a.Brand,{children:[Object(K.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFyWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4yLWMwMDAgNzkuMWI2NWE3OSwgMjAyMi8wNi8xMy0xNzo0NjoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wMy0xN1QxMjo1ODoyMi0wNDowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDMtMTdUMTM6MDU6MDItMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDMtMTdUMTM6MDU6MDItMDQ6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjczYTljZDQ2LTAwMjQtNmM0ZS05NDBiLTFkY2I5MWIyZGYzNiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjEyOTdjMzE0LWExYTEtMTg0MS1hZTBkLTI2MjQwYTMxNzJmNyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjEwMGYzNDdlLTMyZGUtMmI0Ny05ZjQ1LThkMjcwNWQ0MzBiZCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MTAwZjM0N2UtMzJkZS0yYjQ3LTlmNDUtOGQyNzA1ZDQzMGJkIiBzdEV2dDp3aGVuPSIyMDIzLTAzLTE3VDEyOjU4OjIyLTA0OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjMuNSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjczYTljZDQ2LTAwMjQtNmM0ZS05NDBiLTFkY2I5MWIyZGYzNiIgc3RFdnQ6d2hlbj0iMjAyMy0wMy0xN1QxMzowNTowMi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIzLjUgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuwpWu8AAAgfSURBVGje7ZpbbBxnFcePax4KiqqI0KpFqCJqaBUReIFK0IgiEAKkNpXgoYBQaZ8QRTyACkKUIIoIDagIgZQmoW2Skjap3ThNHN+9vq+99t5v9l5m77fZnb3v7O7s7M3uf8a7Zmld4riM6yKv9NdsZpzR98v5zv+c8zm0trZG/w+iPZA9kD2Q/znIC5AGmoTGtqNaozZergpXM6XMCV/a/6A1ZiMn56JgNkSOhJO0IS2ZImZaDGhpKaiTpQTIW1AFSkHsdlRv1BNCreLJlnNXAunAo+aohRycc8dBdGvv87O6uiqr2Ww0KjXRG+cTf1uJOw57U76dA2k0G2pobbtqrjY3hRNqQhJb7Vd2dqVbG9wBkGw5+zD0Q+i70DHosa0oU848lhNyx8Ra9VEX5/qRk3P+AfcnqvVqrRMoko++oQlo9hvCRloMKgiSF/LbEiCoUCkQEp1sMTtZWRsts8u3maKWb+P5XBNbrf1J8lzvUkDbveBfJF3IIGtX2m+iyMGlPGTA9nEnPZJj3R7LsycazX9vO7jZr9X+BZrzztOsV60IyDehn0BPQN+HfnCLegog3zHHbPc6YLkJPkEuzk3qwCIZoqbftUGqjWrdGDE91G8fJElKgOjfr2vVm/W1QqUYiyIKoWxknxGRmQfIkHP4tnyl8Fr756L5WN/g8kj3deuAIiCzm1nprajzU6jwg9hC+94099GQYxjRYT5frJbyLWBxzqv+8phDpQjISHsRYl30JXju78li+nS6lPlnqpQ+exOdyQiZU7hOI+k3YFxJ9wsXtK9Sj7GXVM5J8qcDPdJ9yardSeYZG2vvVgJktL2AcrXUgyQljk9Sspgirpi8qbJClhb8mi5sm1+23wOo2rhL9WCf+Sq9abpK+pDhyfazUDbUpw/r71IYRLgez3PEFVKUAgjqAmVKUPm9lKFyrUTasJ40wSWK5KLn2u9CdX9O6rfGnCqa9s5+jRd5QbrPVwqOUC74RYVBygNsLkFsPkEpPkOelJfcKY9sqUxL7g558dwUNdMoFvuGqZfm/QvHOtLlJeQEJUspQrQOl2tCrHXfD31FUZBStXwjkotRQSjShHuKJjyTtJJwYLEWMrdkakn+DneCpZIVBdEQNpEv5Xui/S60Ly8iwhTORiiQCR1ByxJv5YkPl6NKR+QGkl3OkcvGHppgJsmVYlC17WRrydqS9N0cs5A74aIstl+swO4riIWJ9rv8mcDPdCH9+nvcU9+AkVRbW06nck98VnEQdK807Zmhk6q/dM34Zg/Y4vZ7dGHDnfqWdC1J35dC2k9Yopb9SPrDsNhLG5EVy/E5n/rQmGucrtn6ETXzT9vPsCUvPTt4/IDiIGVRkLvU0/NnP4VtNQ5X8qFym7mWEp3iE6ZkMWkQ6pVMZx0KZkJPTnmmScVMSSbQnS6lh9vP8Y/w9AXdRVIcpCDw2PsWumTs/RyawuStVnlE6pmXNedpzDVBg45R0kb0j7SfIWqxEef4wVHnhPIgxQrsNKinlzTnP+1PB22VWqWZr+TT71YhnRPyOVxTYr3qQgG9hr//LckkLht6aM6voRnf/N1wLfNG3qQDJ2/Yh+iatV95EEGUcmSW/jR58iNTnpkvWCLWry8Glx5aCmqPdkoXNByd92seVvvnvwRn+iRqSDdbYFF7cpgKXZKD3QHX6uloXTwzntl7Rx1jpHIpHJGSvLXWrfeE6nmCu6Aq6wmJS2rf/H9o3rdAU8yMVDuILcRRVxgUUo54sSjVn4PInZGOBm4N9eZ7QysjgFApDyJFpIRkn3BN0XMjf6SB5QGa9s3QiGuMRt+hMfc49eO5JrBERSweVfxj0Wz0SFksHxfrlXJn3sR59hcL6IbRtsjaERDJtRZ8i/SP2VP7LTHLCZZnX/dn/GfercAZT9JzOpKLnBUb4mvIl0XkE49+eAOgUhMa0Vz0x7F8VG5jpHZlx0B4bC2pSl/Uv/5AqpyJb2s+QSeMKE17OOarDIctV0yQNqTbYZBKUepW6bz2X/cl+Hiwo+XY9MSkjvtS7cB1VWxUE3C0XhtrezyWY29nEgxaeD+mxvjOgxQBIh0OnNO+ehBJ7G0d7eTQqvzZGrP93BwxH0c1/601Zn1WF9b/3pFw/gZj7NNoUR5Hz3VfKBdG+2JD48mSF3P8rgJBdXdZ4/a7J1Gtr2DG6LfdoAH7AIrmZdJHjIS8kJ3LHl+hCPLBHrfvThBYasiVZA5NMtN0Hb3TMGx0BFX7ivUqGdHGN9eaHxKQCh/GIu9fjjuwiElEY/DDC2Jjlz/DJL1y1ZYWMrA8uOtALB0g2v8G4uTcxGAqdCbc8mIum3rkIWu3gPy19fsRNdzp+ZuBtGGkEfgt2zW50O2WZO+CpOOZboB0ofvt0gZ19MrSuYNxfnMQ6UTRk/LBZpflabHWrBEmvw8WpCiWCO2F3C+VqiVCYSNj2Ein1C/eFcqGHJuBtGGkyLhQudGuUDgXIckMPjAQQNyRKqbvzJVzB3iR/ziGqQNCVfgoit8DgUyAWbdfCcQGECdtJumAwsFBcSdAWAAt7zwIGr0LlXoliKsZWirXynoMSurm6qoObYm4PksUQgA59F4gnQpmg4RmkzieIx9cbidz5KaH2ACRInL/VkCkyNhYKwUzQWLgboF0gJJFjhZDWhpC7RleGUUNGlMEZGELIHGAHNkKiCR30o3ttoKa4yAGA5cv7ZWPj4xRE+x6XUqASL/DGIAuQi9Dr3RI+nMfQM4A5J6tgrwzQhKUBMekmA3t/YeBPZA9kD0QWW8Dg4Ot0nbsFGEAAAAASUVORK5CYII=",alt:"logo"}),"ProShop"]})}),Object(K.jsx)(U.a,{"aria-controls":"basic-navbar-nav"}),Object(K.jsx)(D.a.Collapse,{id:"basic-navbar-nav",children:Object(K.jsxs)(R.a,{className:"ms-auto",children:[Object(K.jsx)(_,{}),Object(K.jsx)(Z.LinkContainer,{to:"/cart",children:Object(K.jsxs)(R.a.Link,{children:[Object(K.jsx)(Q.d,{}),"Cart",e.length>0&&Object(K.jsx)(E.a,{pill:!0,bg:"success",style:{marginLeft:"5px"},children:e.reduce(((e,t)=>e+t.qty),0)})]})}),t?Object(K.jsxs)(T.a,{title:t.name,id:"username",children:[Object(K.jsx)(Z.LinkContainer,{to:"/profile",children:Object(K.jsx)(T.a.Item,{children:"Profile"})}),Object(K.jsx)(T.a.Item,{onClick:async()=>{try{await a().unwrap(),c(S()),r("/login")}catch(e){console.log(e)}},children:"Logout"})]}):Object(K.jsx)(Z.LinkContainer,{to:"/login",children:Object(K.jsxs)(R.a.Link,{children:[Object(K.jsx)(Q.i,{})," Sign in"]})}),t&&t.isAdmin&&Object(K.jsxs)(T.a,{title:"Admin",id:"adminmenu",children:[Object(K.jsx)(Z.LinkContainer,{to:"/admin/orderlist",children:Object(K.jsx)(T.a.Item,{children:"Orders"})}),Object(K.jsx)(Z.LinkContainer,{to:"/admin/productlist",children:Object(K.jsx)(T.a.Item,{children:"Products"})}),Object(K.jsx)(Z.LinkContainer,{to:"/admin/userlist",children:Object(K.jsx)(T.a.Item,{children:"Users"})})]})]})})]})})})},ee=c(94),te=c(68);var ce=function(){const e=(new Date).getFullYear();return Object(K.jsx)("footer",{children:Object(K.jsx)(M.a,{children:Object(K.jsx)(ee.a,{children:Object(K.jsx)(te.a,{className:"text-center py-3",children:Object(K.jsxs)("p",{children:["ProShop \xa9",e]})})})})})},re=c(10);c(87);var ae=function(){return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)($,{}),Object(K.jsx)("main",{className:"py-3",children:Object(K.jsx)(M.a,{children:Object(K.jsx)(i.d,{})})}),Object(K.jsx)(ce,{}),Object(K.jsx)(re.a,{})]})},se=c(101);var ne=function(e){let{value:t,text:c}=e;return Object(K.jsxs)("div",{className:"rating",children:[Object(K.jsx)("span",{children:t>=1?Object(K.jsx)(Q.e,{}):t>=.5?Object(K.jsx)(Q.f,{}):Object(K.jsx)(Q.c,{})}),Object(K.jsx)("span",{children:t>=2?Object(K.jsx)(Q.e,{}):t>=1.5?Object(K.jsx)(Q.f,{}):Object(K.jsx)(Q.c,{})}),Object(K.jsx)("span",{children:t>=3?Object(K.jsx)(Q.e,{}):t>=2.5?Object(K.jsx)(Q.f,{}):Object(K.jsx)(Q.c,{})}),Object(K.jsx)("span",{children:t>=4?Object(K.jsx)(Q.e,{}):t>=3.5?Object(K.jsx)(Q.f,{}):Object(K.jsx)(Q.c,{})}),Object(K.jsx)("span",{children:t>=5?Object(K.jsx)(Q.e,{}):t>=4.5?Object(K.jsx)(Q.f,{}):Object(K.jsx)(Q.c,{})}),Object(K.jsx)("span",{className:"rating-text",children:c&&c})]})};var ie=function(e){let{product:t}=e;return Object(K.jsxs)(se.a,{className:"my-3 p-3 rounded",children:[Object(K.jsx)(n.Link,{to:"/product/".concat(t._id),children:Object(K.jsx)(se.a.Img,{src:t.image,variant:"top"})}),Object(K.jsxs)(se.a.Body,{children:[Object(K.jsx)(n.Link,{to:"/product/".concat(t._id),children:Object(K.jsx)(se.a.Title,{as:"div",className:"product-title",children:Object(K.jsx)("strong",{children:t.name})})}),Object(K.jsx)(se.a.Text,{as:"div",children:Object(K.jsx)(ne,{value:t.rating,text:"".concat(t.numReviews," reviews")})}),Object(K.jsxs)(se.a.Text,{as:"h3",children:["$",t.price]})]})]})};const je=u.injectEndpoints({endpoints:e=>({getProducts:e.query({query:e=>{let{keyword:t,pageNumber:c}=e;return{url:h,params:{keyword:t,pageNumber:c}}},providesTags:["Products"],keepUnusedDataFor:5}),getProductsDetails:e.query({query:e=>({url:"".concat(h,"/").concat(e)}),keepUnusedDataFor:5}),createProduct:e.mutation({query:()=>({url:h,method:"POST"}),invalidatesTags:["Product"]}),updateProduct:e.mutation({query:e=>({url:"".concat(h,"/").concat(e._id),method:"PUT",body:e}),invalidatesTags:["Products"]}),uploadProductImage:e.mutation({query:e=>({url:"".concat("/api/upload"),method:"POST",body:e})}),deleteProduct:e.mutation({query:e=>({url:"".concat(h,"/").concat(e),method:"DELETE"})}),createReview:e.mutation({query:e=>({url:"".concat(h,"/").concat(e.productId,"/reviews"),method:"POST",body:e}),invalidatesTags:["Product"]}),getTopProducts:e.query({query:()=>({url:"".concat(h,"/top")}),keepUnusedDataFor:5})})}),{useGetProductsQuery:de,useGetProductsDetailsQuery:le,useCreateProductMutation:oe,useUpdateProductMutation:be,useUploadProductImageMutation:he,useDeleteProductMutation:Oe,useCreateReviewMutation:xe,useGetTopProductsQuery:ue}=je;var me=c(95);var pe=function(){return Object(K.jsx)(me.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"}})},ge=c(105);var ye=function(e){let{pages:t,page:c,isAdmin:r=!1,keyword:a=""}=e;return t>1&&Object(K.jsx)(ge.a,{children:[...Array(t).keys()].map((e=>Object(K.jsx)(Z.LinkContainer,{to:r?"/admin/productList/".concat(e+1):a?"/search/".concat(a,"/page/").concat(e+1):"/page/".concat(e+1),children:Object(K.jsx)(ge.a.Item,{active:e+1===c,children:e+1})},e+1)))})},ve=c(102),Ie=c(96),Pe=c(103);function Ne(e){let{variant:t,children:c}=e;return Object(K.jsx)(Pe.a,{variant:t,children:c})}Ne.defaultProps={variant:"info"};var ke=Ne;var Ce=function(){var e;const{data:t,isLoading:c,error:r}=ue();return c?Object(K.jsx)(pe,{}):r?Object(K.jsx)(ke,{variant:"danger",children:(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.message)||r.message||JSON.stringify(r)}):Object(K.jsx)(ve.a,{pause:"hover",className:"bg-primary mb-4",children:t.map((e=>Object(K.jsx)(ve.a.Item,{children:Object(K.jsxs)(n.Link,{to:"/product/".concat(e._id),children:[Object(K.jsx)(Ie.a,{src:e.image,alt:e.name,fluid:!0}),Object(K.jsx)(ve.a.Caption,{className:"carousel-caption",children:Object(K.jsxs)("h2",{children:[e.name," ($",e.price,")"]})})]})},e._id)))})};var fe=function(){var e;const{pageNumber:t,keyword:c}=Object(i.I)(),{data:r,isLoading:a,error:s}=de({keyword:c,pageNumber:t});return Object(K.jsxs)("div",{children:[c?Object(K.jsx)(n.Link,{to:"/",className:"btn btn-light mb-4",children:"Go Back"}):Object(K.jsx)(Ce,{}),a?Object(K.jsx)(pe,{}):s?Object(K.jsx)(ke,{variant:"danger",children:(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.message)||s.error}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h1",{children:"Latest products"}),Object(K.jsx)(ee.a,{children:r.products.map((e=>Object(K.jsx)(te.a,{sm:12,md:6,lg:4,xl:3,children:Object(K.jsx)(ie,{product:e})},e._id)))}),Object(K.jsx)(ye,{pages:r.pages,page:r.page,keyword:c||""})]})]})},Ae=c(106);var Le=function(){const{id:e}=Object(i.I)(),t=Object(d.e)(),c=Object(i.D)(),[a,s]=Object(r.useState)(1),[j,l]=Object(r.useState)(0),[o,b]=Object(r.useState)(""),{data:h,isLoading:O,refetch:x,error:u}=le(e),[m,{isLoading:p}]=xe(),{userInfo:g}=Object(d.f)((e=>e.auth));return Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)("div",{children:[Object(K.jsx)(n.Link,{className:"btn btn-light my-3",to:"/",children:"Go Back"}),O?Object(K.jsx)(pe,{}):u?Object(K.jsx)(ke,{variant:"danger",children:(null===u||void 0===u?void 0:u.data.message)||u.error}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{md:5,children:Object(K.jsx)(Ie.a,{src:h.image,alt:h.name,fluid:!0})}),Object(K.jsx)(te.a,{md:4,children:Object(K.jsxs)(Ae.a,{variant:"flush",children:[Object(K.jsx)(Ae.a.Item,{children:Object(K.jsx)("h3",{children:h.name})}),Object(K.jsx)(Ae.a.Item,{children:Object(K.jsx)(ne,{value:h.rating,text:"".concat(h.numReviews," reviews"),children:h.rating})}),Object(K.jsx)(Ae.a.Item,{children:h.description})]})}),Object(K.jsx)(te.a,{md:3,children:Object(K.jsx)(se.a,{children:Object(K.jsxs)(Ae.a,{variant:"flush",children:[Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Price:"}),Object(K.jsx)(te.a,{children:Object(K.jsx)("strong",{children:h.price})})]})}),Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"status:"}),Object(K.jsx)(te.a,{children:Object(K.jsx)("strong",{children:h.countInStock>0?"In Stock":"Out of Stock"})})]})}),h.countInStock>0&&Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Qty"}),Object(K.jsx)(te.a,{children:Object(K.jsx)(X.a.Control,{as:"select",value:a,onChange:e=>{s(Number(e.target.value))},children:[...Array(h.countInStock).keys()].map((e=>Object(K.jsx)("option",{value:e+1,children:e+1},e+1)))})})]})}),Object(K.jsx)(Ae.a.Item,{children:Object(K.jsx)(H.a,{className:"btn-block",type:"button",disabled:0===h.countInStock,onClick:()=>{t(v({...h,qty:a})),c("/cart")},children:"Add To Cart"})})]})})})]}),Object(K.jsx)(ee.a,{className:"review",children:Object(K.jsxs)(te.a,{md:6,children:[Object(K.jsx)("h2",{children:"Reviews"}),0===h.reviews.length&&Object(K.jsx)(ke,{children:"No Reviews"}),Object(K.jsxs)(Ae.a,{variant:"flush",children:[h.reviews.map((e=>Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsx)("strong",{children:e.name}),Object(K.jsx)(ne,{value:e.rating}),Object(K.jsx)("p",{children:e.createdAt.substring(0,10)}),Object(K.jsx)("p",{children:e.comment})]},e._id))),Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsx)("h2",{children:"Write a Custumer Review"}),p&&Object(K.jsx)(pe,{}),g?Object(K.jsxs)(X.a,{onSubmit:async t=>{t.preventDefault();try{await m({productId:e,rating:j,comment:o}).unwrap(),x(),re.b.success("Review Submitted"),l(0),b("")}catch(r){var c;re.b.error((null===r||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message)||r.error)}},children:[Object(K.jsxs)(X.a.Group,{controlId:"rating",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"Rating"}),Object(K.jsxs)(X.a.Control,{as:"select",value:j,onChange:e=>l(Number(e.target.value)),children:[Object(K.jsx)("option",{value:"",children:"Select..."}),Object(K.jsx)("option",{value:"1",children:"1 - Poor"}),Object(K.jsx)("option",{value:"2",children:"2 - Fair"}),Object(K.jsx)("option",{value:"3",children:"3 - Good"}),Object(K.jsx)("option",{value:"4",children:"4 - Very Good"}),Object(K.jsx)("option",{value:"5",children:"5 - Excellent"})]})]}),Object(K.jsxs)(X.a.Group,{conttrolId:"comment",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"Comment"}),Object(K.jsx)(X.a.Control,{as:"textarea",row:"3",value:o,onChange:e=>b(e.target.value)})]}),Object(K.jsx)(H.a,{disabled:p,type:"submit",variant:"primary",children:"Submit"})]}):Object(K.jsxs)(ke,{children:["Please ",Object(K.jsx)(n.Link,{to:"/login",children:"sign in"})," to write a review"," "]})]})]})]})})]})]})})};var Se=function(){const e=Object(i.D)(),t=Object(d.e)(),c=Object(d.f)((e=>e.cart)),{cartItems:r}=c;return Object(K.jsxs)(ee.a,{children:[Object(K.jsxs)(te.a,{md:8,children:[Object(K.jsx)("h1",{style:{marginBottom:"20px"},children:"Shopping Cart"}),0===r.length?Object(K.jsxs)(ke,{children:["Your Cart is empty",Object(K.jsx)(n.Link,{to:"/",children:"Go Back"})]}):Object(K.jsx)(Ae.a,{variant:"flush",children:r.map((e=>Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{md:2,children:Object(K.jsx)(Ie.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(K.jsx)(te.a,{md:3,children:Object(K.jsx)(n.Link,{to:"/product/".concat(e._id),children:e.name})}),Object(K.jsxs)(te.a,{md:2,children:["$",e.price]}),Object(K.jsx)(te.a,{md:2,children:Object(K.jsx)(X.a.Control,{as:"select",value:e.qty,onChange:c=>{(async(e,c)=>{t(v({...e,qty:c}))})(e,Number(c.target.value))},children:[...Array(e.countInStock).keys()].map((e=>Object(K.jsx)("option",{value:e+1,children:e+1},e+1)))})}),Object(K.jsx)(te.a,{md:2,children:Object(K.jsx)(H.a,{onClick:()=>(async e=>{t(I(e))})(e._id),type:"button",variant:"light",children:Object(K.jsx)(Q.h,{})})})]})},e._id)))})]}),Object(K.jsx)(te.a,{md:4,children:Object(K.jsx)(se.a,{children:Object(K.jsxs)(Ae.a,{variant:"flush",children:[Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsxs)("h2",{children:["Subtotal(",r.reduce(((e,t)=>e+t.qty),0),")Items"]}),"$",r.reduce(((e,t)=>e+t.qty*t.price),0).toFixed(2)]}),Object(K.jsx)(Ae.a.Item,{children:Object(K.jsx)(H.a,{onClick:()=>{e("/login?redirect=/shipping")},type:"button",className:"btn-block",disabled:0===r.length,children:"Proceed To Checkout"})})]})})})]})};var Ge=function(e){let{children:t}=e;return Object(K.jsx)(M.a,{children:Object(K.jsx)(ee.a,{className:"justify-content-md-center",children:Object(K.jsx)(te.a,{xs:12,md:6,children:t})})})};var we=function(){const[e,t]=Object(r.useState)(""),[c,a]=Object(r.useState)(""),s=Object(d.e)(),j=Object(i.D)(),[l,{isLoading:o}]=J(),{userInfo:b}=Object(d.f)((e=>e.auth)),{search:h}=Object(i.A)(),O=new URLSearchParams(h).get("redirect")||"/";return Object(r.useEffect)((()=>{b&&j(O)}),[b,O,j]),Object(K.jsxs)(Ge,{children:[Object(K.jsx)("h1",{children:"Sign In"}),Object(K.jsxs)(X.a,{onSubmit:async t=>{t.preventDefault();try{const t=await l({email:e,password:c}).unwrap();s(L({...t})),j(O)}catch(a){var r;re.b.error((null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||a.error)}},children:[Object(K.jsxs)(X.a.Group,{controlId:"email",className:"my-3",children:[Object(K.jsx)(X.a.Label,{children:"Email Adress"}),Object(K.jsx)(X.a.Control,{type:"email",placeholder:"Enter email",value:e,onChange:e=>t(e.target.value)})]}),Object(K.jsxs)(X.a.Group,{controlId:"password",className:"my-3",children:[Object(K.jsx)(X.a.Label,{children:"Password"}),Object(K.jsx)(X.a.Control,{type:"password",placeholder:"Enter Password",value:c,onChange:e=>a(e.target.value)})]}),Object(K.jsx)(H.a,{type:"submit",variant:"primary",className:"mt-2",disabled:o,children:"Sign In"}),o&&Object(K.jsx)(pe,{})]}),Object(K.jsx)(ee.a,{className:"py-3",children:Object(K.jsxs)(te.a,{children:["New Custumer? ",Object(K.jsx)(n.Link,{to:O?"/register?redirect=".concat(O):"/register",children:"Register"})]})})]})};var De=function(){const[e,t]=Object(r.useState)(""),[c,a]=Object(r.useState)(""),[s,j]=Object(r.useState)(""),[l,o]=Object(r.useState)(""),b=Object(d.e)(),h=Object(i.D)(),[O,{isLoading:x}]=z(),{userInfo:u}=Object(d.f)((e=>e.auth)),{search:m}=Object(i.A)(),p=new URLSearchParams(m).get("redirect")||"/";return Object(r.useEffect)((()=>{u&&h(p)}),[u,p,h]),Object(K.jsxs)(Ge,{children:[Object(K.jsx)("h1",{children:"Sign Up"}),Object(K.jsxs)(X.a,{onSubmit:async t=>{if(t.preventDefault(),c!==s)re.b.error("Passwords do not match");else try{const t=await O({email:l,password:c,name:e}).unwrap();b(L({...t})),h(p)}catch(a){var r;re.b.error((null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||a.error)}},children:[Object(K.jsxs)(X.a.Group,{controlId:"name",className:"my-3",children:[Object(K.jsx)(X.a.Label,{children:"Name"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"Enter name",value:e,onChange:e=>t(e.target.value)})]}),Object(K.jsxs)(X.a.Group,{controlId:"email",className:"my-3",children:[Object(K.jsx)(X.a.Label,{children:"Email Adress"}),Object(K.jsx)(X.a.Control,{type:"email",placeholder:"Enter email",value:l,onChange:e=>o(e.target.value)})]}),Object(K.jsxs)(X.a.Group,{controlId:"password",className:"my-3",children:[Object(K.jsx)(X.a.Label,{children:"Password"}),Object(K.jsx)(X.a.Control,{type:"password",placeholder:"Enter Password",value:c,onChange:e=>a(e.target.value)})]}),Object(K.jsxs)(X.a.Group,{controlId:"confirmPassword",className:"my-3",children:[Object(K.jsx)(X.a.Label,{children:"Confirm Password"}),Object(K.jsx)(X.a.Control,{type:"password",placeholder:"Confirm Password",value:s,onChange:e=>j(e.target.value)})]}),Object(K.jsx)(H.a,{type:"submit",variant:"primary",className:"mt-2",disabled:x,children:"Register"}),x&&Object(K.jsx)(pe,{})]}),Object(K.jsx)(ee.a,{className:"py-3",children:Object(K.jsxs)(te.a,{children:["Allready have a account? ",Object(K.jsx)(n.Link,{to:p?"/login?redirect=".concat(p):"/login",children:"Login"})]})})]})};var Me=function(e){let{step1:t,step2:c,step3:r,step4:a}=e;return Object(K.jsxs)(R.a,{className:"justify-content-center mb-4",children:[Object(K.jsx)(R.a.Item,{children:t?Object(K.jsx)(Z.LinkContainer,{to:"/login",children:Object(K.jsx)(R.a.Link,{children:"Sign In"})}):Object(K.jsx)(R.a.Link,{disabled:!0,children:"Sign In"})}),Object(K.jsx)(R.a.Item,{children:c?Object(K.jsx)(Z.LinkContainer,{to:"/shipping",children:Object(K.jsx)(R.a.Link,{children:"Shipping"})}):Object(K.jsx)(R.a.Link,{disabled:!0,children:"Shipping"})}),Object(K.jsx)(R.a.Item,{children:r?Object(K.jsx)(Z.LinkContainer,{to:"/payment",children:Object(K.jsx)(R.a.Link,{children:"Payment"})}):Object(K.jsx)(R.a.Link,{disabled:!0,children:"Payment"})}),Object(K.jsx)(R.a.Item,{children:a?Object(K.jsx)(Z.LinkContainer,{to:"/placeorder",children:Object(K.jsx)(R.a.Link,{children:"Place Order"})}):Object(K.jsx)(R.a.Link,{disabled:!0,children:"Place Order"})})]})};var Ue=function(){const e=Object(d.f)((e=>e.cart)),{shippingAddress:t}=e,[c,a]=Object(r.useState)((null===t||void 0===t?void 0:t.address)||""),[s,n]=Object(r.useState)((null===t||void 0===t?void 0:t.city)||""),[j,l]=Object(r.useState)((null===t||void 0===t?void 0:t.postalCode)||""),[o,b]=Object(r.useState)((null===t||void 0===t?void 0:t.country)||""),h=Object(d.e)(),O=Object(i.D)();return Object(K.jsxs)(Ge,{children:[Object(K.jsx)(Me,{step1:!0,step2:!0}),Object(K.jsx)("h1",{children:"Shipping"}),Object(K.jsxs)(X.a,{onSubmit:e=>{e.preventDefault(),h(P({address:c,city:s,postalCode:j,country:o})),O("/payment")},children:[Object(K.jsxs)(X.a.Group,{controlId:"address",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"Address"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"Enter Adress",value:c,onChange:e=>a(e.target.value)})]}),Object(K.jsxs)(X.a.Group,{controlId:"city",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"City"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"Enter City",value:s,onChange:e=>n(e.target.value)})]}),Object(K.jsxs)(X.a.Group,{controlId:"postalCode",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"Postal Code"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"Enter Postal Code",value:j,onChange:e=>l(e.target.value)})]}),Object(K.jsxs)(X.a.Group,{controlId:"country",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"Country"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"Enter Country",value:o,onChange:e=>b(e.target.value)})]}),Object(K.jsx)(H.a,{type:"submit",variant:"primary",className:"my-2",children:"Continue"})]})]})};var Re=function(){const{userInfo:e}=Object(d.f)((e=>e.auth));return e?Object(K.jsx)(i.d,{}):Object(K.jsx)(i.c,{to:"/login",replace:!0})};var Ee=function(){const{userInfo:e}=Object(d.f)((e=>e.auth));return e&&e.isAdmin?Object(K.jsx)(i.d,{}):Object(K.jsx)(i.c,{to:"/login",replace:!0})};var Te=function(){const[e,t]=Object(r.useState)("PayPal"),c=Object(d.e)(),a=Object(i.D)(),s=Object(d.f)((e=>e.cart)),{shippingAddress:n}=s;return Object(r.useEffect)((()=>{n||a("/shipping")}),[n,a]),Object(K.jsxs)(Ge,{children:[Object(K.jsx)(Me,{step1:!0,step2:!0,step3:!0}),Object(K.jsx)("h1",{children:"Payment Method"}),Object(K.jsxs)(X.a,{onSubmit:t=>{t.preventDefault(),c(N(e)),a("/placeorder")},children:[Object(K.jsxs)(X.a.Group,{children:[Object(K.jsx)(X.a.Label,{as:"legend",children:"Select Method"}),Object(K.jsx)(te.a,{children:Object(K.jsx)(X.a.Check,{type:"radio",className:"my-2",label:"PayPal or Credit Card",id:"PayPal",name:"paymentMethod",value:"PayPal",checked:!0,onChange:e=>t(e.target.value)})})]}),Object(K.jsx)(H.a,{type:"submit",variant:"primary",children:"Continue"})]})]})};const Ze=u.injectEndpoints({endpoints:e=>({createOrder:e.mutation({query:(e,t)=>({url:x,method:"POST",body:{...e}})}),getOrderDetails:e.query({query:e=>({url:"".concat(x,"/").concat(e)}),keepUnusedDataFor:5}),payOrder:e.mutation({query:e=>{let{orderId:t,details:c}=e;return{url:"".concat(x,"/").concat(t,"/pay"),method:"PUT",body:{...c}}}}),getPayPalClientId:e.query({query:()=>({url:"/api/config/paypal"}),keepUnusedDataFor:5}),getOrders:e.query({query:()=>({url:x}),keepUnusedDataFor:5}),deliverOrder:e.mutation({query:e=>({url:"".concat(x,"/").concat(e,"/deliver"),method:"PUT"})})})}),{useCreateOrderMutation:Qe,useGetOrderDetailsQuery:qe,usePayOrderMutation:Je,useGetPayPalClientIdQuery:We,useGetOrdersQuery:ze,useDeliverOrderMutation:Be}=Ze;var Fe=function(){const e=Object(i.D)(),t=Object(d.e)(),c=Object(d.f)((e=>e.cart)),a=Object(d.f)((e=>e.auth.userInfo._id)),[s,{isLoading:j,error:l}]=Qe();return Object(r.useEffect)((()=>{c.shippingAddress.address?c.paymentMethod||e("/payment"):e("/shipping")}),[c.paymentMethod,e,c.shippingAddress]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(Me,{step1:!0,step2:!0,step3:!0,step4:!0}),Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{md:8,children:Object(K.jsx)(Ae.a,{variant:"flush",children:Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsx)("h2",{children:"Shipping"}),Object(K.jsxs)("p",{children:[Object(K.jsx)("strong",{children:"Address:"}),c.shippingAddress.address,",",c.shippingAddress.city,",",c.shippingAddress.postalCode,",",c.shippingAddress.country,","]}),Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsx)("h2",{children:"Payment Method"}),Object(K.jsx)("strong",{children:"Method: "}),c.paymentMethod]}),Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsx)("h2",{children:"Order Items"}),0===c.cartItems.length?Object(K.jsx)(ke,{children:"Your cart is empty"}):Object(K.jsx)(Ae.a,{variant:"flush",children:c.cartItems.map(((e,t)=>Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{md:1,children:Object(K.jsx)(Ie.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(K.jsx)(te.a,{children:Object(K.jsx)(n.Link,{to:"/product/".concat(e._id),children:e.name})}),Object(K.jsxs)(te.a,{md:4,children:[e.qty," x $",e.price," = $",e.qty*e.price]})]})},t)))})]})]})})}),Object(K.jsx)(te.a,{md:4,children:Object(K.jsx)(se.a,{children:Object(K.jsxs)(Ae.a,{variant:"flush",children:[Object(K.jsx)(Ae.a.Item,{children:Object(K.jsx)("h2",{children:"Order Summary"})}),Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Items:"}),Object(K.jsxs)(te.a,{children:["$",c.itemsPrice]})]})}),Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Shipping:"}),Object(K.jsxs)(te.a,{children:["$",c.shippingPrice]})]})}),Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Tax:"}),Object(K.jsxs)(te.a,{children:["$",c.taxPrice]})]})}),Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Total:"}),Object(K.jsxs)(te.a,{children:["$",c.totalPrice]})]})}),Object(K.jsx)(Ae.a.Item,{children:l&&Object(K.jsx)(ke,{variant:"danger",children:l.message})}),Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsx)(H.a,{type:"button",className:"btn-block",disabled:0===c.cartItems.length,onClick:async()=>{try{const r=await s({userId:a,orderItems:c.cartItems,shippingAddress:c.shippingAddress,paymentMethod:c.paymentMethod,itemsPrice:c.itemsPrice,shippingPrice:c.shippingPrice,taxPrice:c.taxPrice,totalPrice:c.totalPrice}).unwrap();t(k()),e("/orders/".concat(r._id))}catch(l){re.b.error(l)}},children:"Place Order"}),j&&Object(K.jsx)(pe,{})]})]})})})]})]})};var Ve=function(){const{id:e}=Object(i.I)(),{data:t,isLoading:c,error:a}=qe(e),[s,{isLoading:l}]=Je(),[o,{isLoading:b}]=Be(),[{isPending:h},O]=Object(j.b)(),{data:x,isLoading:u,error:m}=We(),{userInfo:p}=Object(d.f)((e=>e.auth));return Object(r.useEffect)((()=>{if(!m&&!u&&x.clientId){const e=async()=>{O({type:"resetOptions",value:{"client-id":x.clientId,currency:"USD"}}),O({type:"setLoadingStatus",value:"pending"})};t&&!t.isPayd&&(window.paypal||e())}}),[t,x,O,u,m]),c?Object(K.jsx)(pe,{}):a?Object(K.jsx)(ke,{variant:"danger"}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("h1",{children:["Order ",t._id]}),Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{md:8,children:Object(K.jsxs)(Ae.a,{variant:"flush",children:[Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsx)("h2",{children:"Shipping"}),Object(K.jsxs)("p",{children:[Object(K.jsx)("strong",{children:"Name:"}),t.user.name]}),Object(K.jsxs)("p",{children:[Object(K.jsx)("strong",{children:"Email:"}),t.user.email]}),Object(K.jsxs)("p",{children:[Object(K.jsx)("strong",{children:"Adress: "}),t.shippingAddress.address,",",t.shippingAddress.city,",",t.shippingAddress.postalCode,",",t.shippingAddress.country,","]}),t.isDelivered?Object(K.jsxs)(ke,{variant:"success",children:["Delivered on ",t.isDeliveredAt]}):Object(K.jsx)(ke,{variant:"danger",children:"Not Delivered"})]}),Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsx)("h2",{children:"Payment Method"}),Object(K.jsxs)("p",{children:[Object(K.jsx)("strong",{children:"Method:"}),t.paymentMethod]}),t.isPaid?Object(K.jsxs)(ke,{variant:"success",children:["Paid At ",t.paidAt]}):Object(K.jsx)(ke,{variant:"danger",children:"Not Paid"})]}),Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsx)("h2",{children:"Order Items"}),t.orderItems.map(((e,t)=>Object(K.jsx)(Ae.a.Item,{children:Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{md:1,children:Object(K.jsx)(Ie.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),Object(K.jsx)(te.a,{children:Object(K.jsx)(n.Link,{to:"/product/".concat(e.product),children:e.name})}),Object(K.jsxs)(te.a,{md:4,children:[e.qty," x $",e.price," = $",e.qty*e.price]})]})},t)))]})]})}),Object(K.jsx)(te.a,{md:4,children:Object(K.jsx)(se.a,{children:Object(K.jsxs)(Ae.a,{variant:"flush",children:[Object(K.jsx)(Ae.a.Item,{children:Object(K.jsx)("h2",{children:"Order Summary"})}),Object(K.jsxs)(Ae.a.Item,{children:[Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Items"}),Object(K.jsxs)(te.a,{children:["$",t.itemsPrice]})]}),Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Shipping"}),Object(K.jsxs)(te.a,{children:["$",t.shippingPrice]})]}),Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Tax"}),Object(K.jsxs)(te.a,{children:["$",t.taxPrice]})]}),Object(K.jsxs)(ee.a,{children:[Object(K.jsx)(te.a,{children:"Total"}),Object(K.jsxs)(te.a,{children:["$",t.totalPrice]})]})]}),!t.isPaid&&Object(K.jsxs)(Ae.a.Item,{children:[l&&Object(K.jsx)(pe,{}),h?Object(K.jsx)(pe,{}):Object(K.jsxs)("div",{children:[Object(K.jsx)(H.a,{onClick:async function(){await s({orderId:e,details:{payer:{}}}),re.b.success("Payment successfull")},style:{marginBottom:"10px"},children:"Test Pay Order"}),Object(K.jsx)("div",{})]})]}),b&&Object(K.jsx)(pe,{}),p&&p.isAdmin&&t.isPaid&&!t.isDelivered&&Object(K.jsx)(Ae.a.Item,{children:Object(K.jsx)(H.a,{type:"button",className:"btn btn-block",onClick:async()=>{try{await o(e),re.b.success("Order Delivered")}catch(c){var t;re.b.error((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.message)||c.message)}},children:"Mark As Delivered"})})]})})})]})]})},Ye=c(97);var Xe=function(){const{data:e,isLoading:t,error:c}=ze();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h1",{children:"Orders"}),t?Object(K.jsx)(pe,{}):c?Object(K.jsx)(ke,{variant:"danger",children:c}):Object(K.jsxs)(Ye.a,{striped:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(K.jsx)("thead",{children:Object(K.jsxs)("tr",{children:[Object(K.jsx)("th",{children:"ID"}),Object(K.jsx)("th",{children:"USER"}),Object(K.jsx)("th",{children:"DATE"}),Object(K.jsx)("th",{children:"TOTAL"}),Object(K.jsx)("th",{children:"PAID"}),Object(K.jsx)("th",{children:"DELIVERED"})]})}),Object(K.jsx)("tbody",{children:e.map((e=>Object(K.jsxs)("tr",{children:[Object(K.jsx)("td",{children:e._id}),Object(K.jsx)("td",{children:e.user&&e.user.name}),Object(K.jsx)("td",{children:e.createdAt.substring(0,10)}),Object(K.jsx)("td",{children:e.totalPrice}),Object(K.jsx)("td",{children:e.isPaid?e.paidAt.substring(0,10):Object(K.jsx)(Q.g,{style:{color:"red"}})}),Object(K.jsx)("td",{children:e.isDelivered?e.deliveredAt.substring(0,10):Object(K.jsx)(Q.g,{style:{color:"red"}})}),Object(K.jsx)("td",{children:Object(K.jsx)(Z.LinkContainer,{to:"/orders/".concat(e._id),children:Object(K.jsx)(H.a,{variant:"ight",className:"btn-sm",children:"Details"})})})]},e._id)))})]})]})};var He=function(){const{pageNumber:e}=Object(i.I)(),{data:t,isLoading:c,error:r,refetch:a}=de({pageNumber:e}),[s,{isLoading:n}]=oe(),[j,{isLoading:d}]=Oe();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(ee.a,{className:"align-tems-center",children:[Object(K.jsx)(te.a,{children:Object(K.jsx)("h1",{children:"Products"})}),Object(K.jsx)(te.a,{className:"text-end",children:Object(K.jsxs)(H.a,{className:"btn-sm m-3",onClick:()=>{(async()=>{if(window.confirm("Are you sure you want to create a new product?"))try{await s(),a()}catch(r){var e;re.b.error((null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.message)||r.error)}})()},children:[Object(K.jsx)(Q.b,{}),"Create Product"]})})]}),n&&Object(K.jsx)(pe,{}),d&&Object(K.jsx)(pe,{}),c?Object(K.jsx)(pe,{}):r?Object(K.jsx)(ke,{variant:"danger",children:r}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(Ye.a,{striped:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(K.jsx)("thead",{children:Object(K.jsxs)("tr",{children:[Object(K.jsx)("th",{children:"ID"}),Object(K.jsx)("th",{children:"NAME"}),Object(K.jsx)("th",{children:"PRICE"}),Object(K.jsx)("th",{children:"CATEGORY"}),Object(K.jsx)("th",{})]})}),Object(K.jsx)("tbody",{children:t.products.map((e=>Object(K.jsxs)("tr",{children:[Object(K.jsx)("td",{children:e._id}),Object(K.jsx)("td",{children:e.name}),Object(K.jsx)("td",{children:e.price}),Object(K.jsx)("td",{children:e.category}),Object(K.jsx)("td",{children:e.brand}),Object(K.jsxs)("td",{children:[Object(K.jsx)(Z.LinkContainer,{to:"/admin/product/".concat(e._id,"/edit"),children:Object(K.jsx)(H.a,{variant:"light",className:"btn-sm mx-2",children:Object(K.jsx)(Q.b,{})})}),Object(K.jsx)(H.a,{variant:"danger",className:"btn-sm",onClick:()=>{(async e=>{if(console.log(e),window.confirm("Are you sure?"))try{await j(e),re.b.success("Product deleted"),a()}catch(c){var t;re.b.error((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.message)||c.message)}})(e._id)},children:Object(K.jsx)(Q.h,{style:{color:"white"}})})]})]},e._id)))})]}),Object(K.jsx)(ye,{pages:t.pages,page:t.page,isAdmin:!0})]})]})};var Ke=function(){const{id:e}=Object(i.I)(),[t,c]=Object(r.useState)(""),[a,s]=Object(r.useState)(0),[j,d]=Object(r.useState)(""),[l,o]=Object(r.useState)(""),[b,h]=Object(r.useState)(""),[O,x]=Object(r.useState)(0),[u,m]=Object(r.useState)(""),{data:p,isLoading:g,error:y}=le(e),[v,{isLoading:I}]=be(),[P]=he(),N=Object(i.D)();return Object(r.useEffect)((()=>{p&&(c(p.name),s(p.price),d(p.image),o(p.brand),h(p.category),x(p.countInStock),m(p.description))}),[p]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(n.Link,{to:"/admin/productList",className:"btn btn-light my-3",children:"Go Back"}),Object(K.jsxs)(Ge,{children:[Object(K.jsx)("h1",{children:"Edit Product"}),I&&Object(K.jsx)(pe,{}),g?Object(K.jsx)(pe,{}):y?Object(K.jsx)(ke,{variant:"danger",children:y}):Object(K.jsxs)(X.a,{onSubmit:async c=>{c.preventDefault();const r={_id:e,name:t,price:a,image:j,brand:l,category:b,countInStock:O,description:u},s=await v(r);s.error?re.b.error(s.error):(re.b.success("Product Updated"),N("/admin/productlist"))},children:[Object(K.jsxs)(X.a.Group,{controlId:"name",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"name"}),Object(K.jsx)(X.a.Control,{type:"name",placeholder:"Enter name",value:t,onChange:e=>{c(e.target.value)}})]}),Object(K.jsxs)(X.a.Group,{controlId:"price",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"setPrice"}),Object(K.jsx)(X.a.Control,{type:"number",placeholder:"Enter price",value:a,onChange:e=>{s(e.target.value)}})]}),Object(K.jsxs)(X.a.Group,{controlId:"image",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"Image"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"enter image url",value:j,onChange:e=>d}),Object(K.jsx)(X.a.Control,{type:"file",label:"choose file",onChange:async e=>{const t=new FormData;t.append("image",e.target.files[0]);try{const e=await P(t).unwrap();re.b.success(e.message),d(e.image)}catch(c){re.b.error(c.data.message||c.error)}}})]}),Object(K.jsxs)(X.a.Group,{controlId:"brand",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"Brand"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"Enter brand",value:l,onChange:e=>{o(e.target.value)}})]}),Object(K.jsxs)(X.a.Group,{controlId:"countInStock",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"Count in stock"}),Object(K.jsx)(X.a.Control,{type:"number",placeholder:"Enter Count in stock",value:O,onChange:e=>{x(e.target.value)}})]}),Object(K.jsxs)(X.a.Group,{controlId:"category",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"Category"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"Enter Category",value:b,onChange:e=>{h(e.target.value)}})]}),Object(K.jsxs)(X.a.Group,{controlId:"description",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"description"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"Enter description",value:u,onChange:e=>{m(e.target.value)}})]}),Object(K.jsx)(H.a,{type:"submit",variant:"primary",className:"my-2",children:"Update"})]})]})]})};var _e=function(){const{data:e,refetch:t,isLoading:c,error:r}=B(),[a,{isLoading:s}]=F();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h1",{children:"Users"}),s&&Object(K.jsx)(pe,{}),c?Object(K.jsx)(pe,{}):r?Object(K.jsx)(ke,{variant:"danger",children:r}):Object(K.jsxs)(Ye.a,{striped:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(K.jsx)("thead",{children:Object(K.jsxs)("tr",{children:[Object(K.jsx)("th",{children:"ID"}),Object(K.jsx)("th",{children:"NAME"}),Object(K.jsx)("th",{children:"EMAIL"}),Object(K.jsx)("th",{children:"ADMIN"}),Object(K.jsx)("th",{})]})}),Object(K.jsx)("tbody",{children:e.map((e=>Object(K.jsxs)("tr",{children:[Object(K.jsx)("td",{children:e._id}),Object(K.jsx)("td",{children:e.name}),Object(K.jsx)("td",{children:e.email}),Object(K.jsx)("td",{children:e.isAdmin?Object(K.jsx)(Q.a,{style:{color:"green"}}):Object(K.jsx)(Q.g,{style:{color:"red"}})}),Object(K.jsxs)("td",{children:[Object(K.jsx)(Z.LinkContainer,{to:"/admin/user/".concat(e._id,"/edit"),children:Object(K.jsx)(H.a,{variant:"ight",className:"btn-sm",children:Object(K.jsx)(Q.b,{})})}),Object(K.jsx)(H.a,{variant:"danger",className:"btn-sm",onClick:()=>(async e=>{if(window.confirm("are you sure?"))try{await a(e),re.b.success("user deleted"),t()}catch(r){var c;re.b.error((null===r||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message)||r.error)}})(e._id),children:Object(K.jsx)(Q.h,{style:{color:"white"}})})]})]},e._id)))})]})]})};var $e=function(){const{id:e}=Object(i.I)(),[t,c]=Object(r.useState)(""),[a,s]=Object(r.useState)(""),[j,d]=Object(r.useState)(!1),{data:l,refetch:o,isLoading:b,error:h}=V(e),[O,{isLoading:x}]=Y(),u=Object(i.D)();return Object(r.useEffect)((()=>{l&&(c(l.name),s(l.email),d(l.isAdmin))}),[l]),Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(n.Link,{to:"/admin/userlist",className:"btn btn-light my-3",children:"Go Back"}),Object(K.jsxs)(Ge,{children:[Object(K.jsx)("h1",{children:"Edit User"}),x&&Object(K.jsx)(pe,{}),b?Object(K.jsx)(pe,{}):h?Object(K.jsx)(ke,{variant:"danger",children:h}):Object(K.jsxs)(X.a,{onSubmit:async c=>{c.preventDefault();try{await O({userId:e,name:t,email:a,isAdmin:j}),re.b.success("User updated successfully"),o(),u("/admin/userlist")}catch(s){var r;re.b.error((null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||s.error)}},children:[Object(K.jsxs)(X.a.Group,{controlId:"name",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"name"}),Object(K.jsx)(X.a.Control,{type:"name",placeholder:"Enter name",value:t,onChange:e=>{c(e.target.value)}})]}),Object(K.jsxs)(X.a.Group,{controlId:"email",className:"my-2",children:[Object(K.jsx)(X.a.Label,{children:"email"}),Object(K.jsx)(X.a.Control,{type:"text",placeholder:"Enter email",value:a,onChange:e=>{s(e.target.value)}})]}),Object(K.jsx)(X.a.Group,{controlId:"isAdmin",className:"my-2",children:Object(K.jsx)(X.a.Check,{label:"Is Admin",checked:j,onChange:e=>{d(e.target.chekced)},type:"checkbox"})}),Object(K.jsx)(H.a,{type:"submit",variant:"primary",className:"my-2",children:"Update"})]})]})]})};const et=Object(n.createBrowserRouter)(Object(i.r)(Object(K.jsxs)(i.e,{path:"/",element:Object(K.jsx)(ae,{}),children:[Object(K.jsx)(i.e,{index:!0,path:"/",element:Object(K.jsx)(fe,{})}),Object(K.jsx)(i.e,{path:"/search/:keyword",element:Object(K.jsx)(fe,{})}),Object(K.jsx)(i.e,{path:"/page/:pageNumber",element:Object(K.jsx)(fe,{})}),Object(K.jsx)(i.e,{path:"/search/:keyword/page/:pageNumber",element:Object(K.jsx)(fe,{})}),Object(K.jsx)(i.e,{path:"/product/:id",element:Object(K.jsx)(Le,{})}),Object(K.jsx)(i.e,{path:"/cart",element:Object(K.jsx)(Se,{})}),Object(K.jsx)(i.e,{path:"/login",element:Object(K.jsx)(we,{})}),Object(K.jsx)(i.e,{path:"/register",element:Object(K.jsx)(De,{})}),Object(K.jsx)(i.e,{path:"/shipping",element:Object(K.jsx)(Ue,{})}),Object(K.jsxs)(i.e,{path:"",element:Object(K.jsx)(Re,{}),children:[Object(K.jsx)(i.e,{path:"/shipping",element:Object(K.jsx)(Ue,{})}),Object(K.jsx)(i.e,{path:"/payment",element:Object(K.jsx)(Te,{})}),Object(K.jsx)(i.e,{path:"/placeorder",element:Object(K.jsx)(Fe,{})}),Object(K.jsx)(i.e,{path:"/orders/:id",element:Object(K.jsx)(Ve,{})})]}),Object(K.jsxs)(i.e,{path:"",element:Object(K.jsx)(Ee,{}),children:[Object(K.jsx)(i.e,{path:"/admin/orderlist",element:Object(K.jsx)(Xe,{})}),Object(K.jsx)(i.e,{path:"/admin/productlist",element:Object(K.jsx)(He,{})}),Object(K.jsx)(i.e,{path:"/admin/productlist/:pageNumber",element:Object(K.jsx)(He,{})}),Object(K.jsx)(i.e,{path:"/admin/product/:id/edit",element:Object(K.jsx)(Ke,{})}),Object(K.jsx)(i.e,{path:"/admin/userlist",element:Object(K.jsx)(_e,{})}),Object(K.jsx)(i.e,{path:"/admin/user/:id/edit",element:Object(K.jsx)($e,{})})]})]})));s.a.createRoot(document.getElementById("root")).render(Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(d.a,{store:w,children:Object(K.jsx)(j.a,{deferLoading:!0,children:Object(K.jsx)(n.RouterProvider,{router:et})})})}))}},[[88,1,2]]]);
//# sourceMappingURL=main.48a08079.chunk.js.map